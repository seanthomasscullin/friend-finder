<!DOCTYPE html>
<html>
	<head>
		<title>Friend Finder</title>
		<link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' rel='stylesheet'>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
		<script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js' integrity='sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa' crossorigin='anonymous'></script>
	</head>
	<body>
		<div class='container'>
			<h2>Survey Questions</h2>
			<hr>

			<h3>About You</h3>

			<h4>Name</h4>
			<input type='text' id='name' class='form-control' required>

			<h4>Link to Photo</h4>
			<input type='text' id='photo' class='form-control' required>

			<h3>Question 1</h3>
			<h4>You enjoy going on new adventures</h4>
			<select class='chosen-select' id='q1'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3>Question 2</h3>
			<h4>You enjoy meeting new people</h4>
			<select class='chosen-select' id='q2'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3>Question 3</h3>
			<h4>You enjoy staying in on the weekends to watch a movie</h4>
			<select class='chosen-select' id='q3'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3>Question 4</h3>
			<h4>You enjoy going to the gym to workout</h4>
			<select class='chosen-select' id='q4'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3>Question 5</h3>
			<h4>You enjoy going to sport events</h4>
			<select class='chosen-select' id='q5'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3>Question 6</h3>
			<h4>Your best friends are friends from childhood.</h4>
			<select class='chosen-select' id='q6'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>
			
			<h3>Question 7</h3>
			<h4>You enjoy helping others in time of need</h4>
			<select class='chosen-select' id='q7'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3>Question 8</h3>
			<h4>When peoole talk you listen and care</h4>
			<select class='chosen-select' id='q8'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3>Question 9</h3>
			<h4>You respect others and their views</h4>
			<select class='chosen-select' id='q9'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3>Question 10</h3>
			<h4>You enjoy being surronded by people who have a positive attitude</h4>
			<select class='chosen-select' id='q10'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>
			<br><br>
			<button type='submit' class='btn btn-primary btn-lg btn-block' id='submit'>
				Submit
			</button>
			<hr>
			<div class='footer'>
				<div class='container'>
					 <a href='https://github.com/seanthomasscullin/friend-finder'>Github</a>
				</div>
			</div>

			<div id='resultsModal' class='modal fade' role='dialogue'>
				<div class='modal-dialogue'>
					<div class='modal-content'>
						<div class='modal-header'>
							<button type='button' class='close' data-dismiss='modal'></button>
							<h2 class='modal-title'>Best Match</h2>
						</div>
						<div class='modal-body'>
							<h2 id='matchName'></h2>
							<img id='matchImg' src=''>
						</div>
						<div class='modal-footer'>
							<button type='button' class='btn btn-default' data-dismiss='modal'>Close</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script type='text/javascript'>
			
			$('#submit').on('click', function() {

				var formValidation = function() {
					var isValid = true;
					$('.form-control').each(function() {
						if ($(this).val() === '') {
							isValid = false;
						}
					});

					$('.chosen-select').each(function() {
						if($(this).val() === '') {
							isValid = false;
						}
					});
					return isValid;
				}

				if(formValidation()) {
					var userData = {
						name: $('#name').val(),
						photo: $('#photo').val(),
						scores: [
							$('#q1').val(),
							$('#q2').val(),
							$('#q3').val(),
							$('#q4').val(),
							$('#q5').val(),
							$('#q6').val(),
							$('#q7').val(),
							$('#q8').val(),
							$('#q9').val(),
							$('#q10').val(),
						]
					};

					var url = window.location.origin;

					$.post(url + '/api/friends', userData, function(data) {
						
						$('#matchName').text(data.name);
						$('#matchImg').attr('src', data.photo);

						$('#resultsModal').modal('toggle');
					});
				}

				else {
					alert('Sorry, please answer all.');
				}

				return false;
			});
		</script>
	</body>
</html>